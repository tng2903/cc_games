window.__require=function t(e,i,n){function o(s,h){if(!i[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var r="function"==typeof __require&&__require;if(!h&&r)return r(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({ad:[function(t,e){"use strict";cc._RF.push(e,"fba2bAKZeVCO4HE0RM+GlZQ","ad"),cc.Class({extends:cc.Component,properties:{adId:"",ad:null},onLoad:function(){},start:function(){},show:function(){console.log("start");var t=null;FBInstant.getRewardedVideoAsync("489687378154315_489914618131591").then(function(e){return(t=e).loadAsync()}).then(function(){return t.showAsync()}).then(function(){})}}),cc._RF.pop()},{}],common:[function(t,e){"use strict";cc._RF.push(e,"e675fDmUIBJTpKi5BZK74yr","common"),e.exports={ac:0},cc._RF.pop()},{}],gameCtl:[function(t,e){"use strict";cc._RF.push(e,"08938alcQRI9LIk46OAOEcn","gameCtl");var i=t("common");cc.Class({extends:cc.Component,properties:{cvs:{default:null,type:cc.Node},human:{default:null,type:cc.Node},humanStand:{default:null,type:cc.SpriteFrame},g1:{default:null,type:cc.Node},g2:{default:null,type:cc.Node},g3:{default:null,type:cc.Node},L1:{default:null,type:cc.Node},L2:{default:null,type:cc.Node},scoreShow:{default:null,type:cc.Label},historyScoreShow:{default:null,type:cc.Label},historyScoreShowBg:{default:null,type:cc.Node},resultShow:{default:null,type:cc.Node},perfectShow:{default:null,type:cc.Node},loadMask:{default:null,type:cc.Node},score:0,mainX:0,maxWidth:0,minWidth:0,maxDistance:0,gHeight:0,gY:0,timeTemp:0,lineBorder:0,gameReady:!1,gameFree:!1,lineAct:!1,lineSpeed:3,roundDistance:0,roundNum:1,humanMoveSpead:10,lineMoveTime:.7,perfectCount:0,historyScore:0,rankName:"testRank",newShareImg:""},onLoad:function(){},start:function(){this.initGame(),this.initTouchEvent(),this.historyScoreShow.node.active=!1,this.historyScoreShowBg.active=!1,this.getHistoryScore()},update:function(){this.lineAct&&(this.getLineStatic(1).height+=this.lineSpeed,this.getLineStatic(1).height>=this.cvs.width&&(this.stopLine(),this.gameFree=!1))},pageToIndex:function(){this.isLoading()||cc.director.loadScene("index")},pageToRank:function(){this.isLoading()||(i.ac=1,cc.director.loadScene("index"))},pageToShare:function(){this.isLoading()||(i.ac=2,cc.director.loadScene("index"))},initGame:function(){this.perfectShow.active=!1,this.score=0,this.scoreShow.string=this.score,this.perfectCount=0,this.resultShow.active=!1,this.human.getComponent("human").initPosition(),this.mainX=this.human.x,this.minWidth=this.human.width,this.maxWidth=4*this.human.width,this.maxDistance=this.cvs.width/2-this.mainX-2*this.lineBorder,this.human.y>0?this.gHeight=this.cvs.height/2-this.human.y:this.gHeight=this.cvs.height/2+this.human.y,this.gHeight=this.gHeight-this.human.height/2,this.gY=-this.cvs.height/2+this.gHeight/2,this.gameReady=!1,this.gameFree=!1,this.roundDistance=0,this.roundNum=1,this.initG()},initG:function(){var t=this.getNewWidth(),e=this.mainX-(t/2-this.human.width/2);this.getGroundStatic(1).getComponent("g").init(e,this.gY,t,this.gHeight);var i=this.getNewDistance(t);this.roundDistance=i;var n=e+i,o=this.getNewWidth(t,i);this.getGroundStatic(2).getComponent("g").init(n,this.gY,o,this.gHeight),this.readyLine()},getNewWidth:function(t,e){if(null==t&&null==e)return this.minWidth+(this.maxWidth-this.minWidth)*cc.random0To1();var i=2*(e-t/2-this.lineBorder);return i>this.maxWidth?this.minWidth+(this.maxWidth-this.minWidth)*cc.random0To1():this.minWidth+(i-this.minWidth)*cc.random0To1()},getNewDistance:function(t){return t+this.lineBorder+(this.maxDistance-t)*cc.random0To1()},readyLine:function(){var t=this.getGroundStatic(1).x+this.getGroundStatic(1).width/2,e=this.getGroundStatic(1).y+this.getGroundStatic(1).height/2;this.roundNum>2?this.getLineStatic(1).getComponent("line").ready(t,e,!0):this.getLineStatic(1).getComponent("line").ready(t,e),this.startRound()},initTouchEvent:function(){var t=this;this.cvs.on("touchstart",function(){t.gameReady&&(t.gameReady=!1,t.gameFree=!0,t.activeLine())}),this.cvs.on("touchend",function(){t.gameFree&&(t.stopLine(),t.gameFree=!1)})},activeLine:function(){this.lineAct=!0},stopLine:function(){this.lineAct=!1,this.lineAction(this.getLineStatic(1),90)},lineAction:function(t,e){var i=cc.rotateBy(this.lineMoveTime,e);i.easing(cc.easeIn(5));var n=cc.callFunc(function(){this.closeRound()},this),o=cc.sequence(i,n);t.runAction(o)},closeRound:function(){var t=this.getLineStatic(1).height,e=this.roundDistance-this.getGroundStatic(1).width/2-this.getGroundStatic(2).width/2,i=this.roundDistance-this.getGroundStatic(1).width/2+this.getGroundStatic(2).width/2;t>=e&&t<=i?this.successAction():this.humanToLine()},humanToLine:function(){var t=this.getLineStatic(1).x+this.getLineStatic(1).height-this.human.width/2,e=cc.moveTo(this.getHumanMoveTime(),t,this.human.y),i=cc.callFunc(function(){this.human.getComponent(cc.Animation).stop(),this.human.getComponent(cc.Sprite).spriteFrame=this.humanStand;var t=cc.rotateBy(this.timeTemp/2,90);this.getLineStatic(1).runAction(t),this.gamOver()},this),n=cc.sequence(e,i);this.human.getComponent(cc.Animation).play(),this.human.runAction(n)},gamOver:function(){var t=cc.moveTo(this.timeTemp/2,this.human.x,-this.cvs.height/2-this.human.height/2),e=cc.callFunc(function(){this.resultShow.getComponent("resultShow").show(this.score,this.historyScore),(null==this.historyScore||this.historyScore<this.score)&&this.updateScore(this.score)},this),i=cc.sequence(t,e);this.human.runAction(i)},getHumanMoveTime:function(t){return null==t?this.getLineStatic(1).height/this.humanMoveSpead:(t-this.human.x)/this.humanMoveSpead},successAction:function(){var t=this.getGroundStatic(2).x+this.getGroundStatic(2).width/2-this.human.width/2,e=cc.moveTo(this.getHumanMoveTime(t),t,this.human.y),i=cc.callFunc(function(){this.human.getComponent(cc.Animation).stop(),this.human.getComponent(cc.Sprite).spriteFrame=this.humanStand,this.addScore();var t=this.getGroundStatic(2).x-this.mainX+(this.getGroundStatic(2).width/2-this.human.width/2);this.pageMove(t)},this),n=cc.sequence(e,i);this.human.getComponent(cc.Animation).play(),this.human.runAction(n)},pageMove:function(t){this.pageMoveNode(this.getGroundStatic(1),t),this.pageMoveNode(this.getGroundStatic(2),t),this.pageMoveNode(this.getLineStatic(1),t),this.pageMoveNode(this.getLineStatic(2),t),this.getNewG(this.getGroundStatic(2).x-t,this.getGroundStatic(2).width);var e=cc.callFunc(function(){this.roundNum++,this.readyLine()},this),i=cc.moveTo(this.timeTemp,this.human.x-t,this.human.y),n=cc.sequence(i,e);this.human.runAction(n)},addScore:function(){var t=this.getLineStatic(1).height-this.getGroundStatic(2).width/2,e=this.roundDistance-this.getGroundStatic(1).width/2-this.getGroundStatic(2).width/2;e-5<=t&&t<=e+5?(this.perfectCount++,this.score+=1,this.score+=this.perfectCount,this.superScore()):(this.perfectCount=0,this.score+=1),this.scoreShow.string=this.score},pageMoveNode:function(t,e){var i=cc.moveTo(this.timeTemp,t.x-e,t.y);t.runAction(i)},getNewG:function(t,e){var i=this.getNewDistance(e);this.roundDistance=i;var n=this.getNewWidth(e,i);this.getGroundStatic(3).getComponent("g").init(this.cvs.width,this.gY,n,this.gHeight);var o=cc.moveTo(this.timeTemp,t+i,this.gY);this.getGroundStatic(3).runAction(o)},startRound:function(){this.gameReady=!0,this.gameFree=!1},getGroundStatic:function(t){var e=this.roundNum%3;switch(t){case 1:return 1==e?this.g1:2==e?this.g2:this.g3;case 2:return 1==e?this.g2:2==e?this.g3:this.g1;case 3:return 1==e?this.g3:2==e?this.g1:this.g2}},getLineStatic:function(t){var e=this.roundNum%2;switch(t){case 1:return 1==e?this.L1:this.L2;case 2:return 1==e?this.L2:this.L1}},reStart:function(){1==this.roundNum?this.getLineStatic(1).getComponent("line").reInit(-180):(this.getLineStatic(1).getComponent("line").reInit(-180),this.getLineStatic(2).getComponent("line").reInit(-90)),this.getGroundStatic(1).getComponent("g").hide(),this.getGroundStatic(2).getComponent("g").hide(),this.getGroundStatic(3).getComponent("g").hide(),this.getLineStatic(1).heght=0,this.getLineStatic(2).heght=0,this.initGame()},superScore:function(){this.perfectShow.getComponent(cc.Label).string="perfect \xd7"+this.perfectCount,this.perfectShow.active=!0;var t=this;setTimeout(function(){t.perfectShow.active=!1},1e3)},getHistoryScore:function(){try{var t=this;FBInstant.getLeaderboardAsync(this.rankName).then(function(t){return t.getPlayerEntryAsync()}).then(function(e){t.historyScore=e.getScore(),t.iniHisScore()})}catch(e){this.historyScoreShow.node.active=!1,this.historyScoreShowBg.active=!1,console.log("show history score error : "+e)}},updateScore:function(t){try{var e=this;FBInstant.getLeaderboardAsync(this.rankName).then(function(e){return e.setScoreAsync(t)}).then(function(t){e.historyScore=t.getScore(),e.iniHisScore()})}catch(i){this.historyScoreShow.node.active=!1,this.historyScoreShowBg.active=!1,console.log("update history score error : "+i)}},iniHisScore:function(){0==this.historyScore||null==this.historyScore?(this.historyScoreShow.node.active=!1,this.historyScoreShowBg.active=!1):(this.historyScoreShow.node.active=!0,this.historyScoreShowBg.active=!0,this.historyScoreShow.string="highest : "+this.historyScore)},shareRequest:function(){if(!this.isLoading()){this.loadMask.getComponent("mask").showLoad();var t=this;try{FBInstant.shareAsync({intent:"SHARE",image:t.newShareImg,text:"oh bro ,i need ur help"}).then(function(){t.loadMask.getComponent("mask").closeLoad(),console.log("share finish")})}catch(e){t.loadMask.getComponent("mask").closeLoad(),console.log("share error : "),console.log(e)}}},isLoading:function(){return!!this.loadMask.active}}),cc._RF.pop()},{common:"common"}],g:[function(t,e){"use strict";cc._RF.push(e,"92741ZH7CdK4YFPMyJyyUky","g"),cc.Class({extends:cc.Component,properties:{red:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},init:function(t,e,i,n){this.node.active=!0,this.node.x=t,this.node.y=e,this.node.width=i,this.node.height=n,this.initRed()},initRed:function(){this.red.width=10,this.red.y=this.node.height/2-this.red.height/2,this.red.x=0},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],human:[function(t,e){"use strict";cc._RF.push(e,"2e1cfJHYT5PH4lxj5Ao/gan","human"),cc.Class({extends:cc.Component,properties:{x:-165,y:-90},onLoad:function(){},start:function(){},initPosition:function(){this.node.x=this.x,this.node.y=this.y},moveByX:function(t){this.node.x=t}}),cc._RF.pop()},{}],indexCtl:[function(t,e){"use strict";cc._RF.push(e,"6d595xVHxlLf6k3NXenL/w9","indexCtl");var i=t("common");cc.Class({extends:cc.Component,properties:{rankName:"testRank",newShareImg:"",loadMask:{default:null,type:cc.Node},rankMask:{default:null,type:cc.Node}},onLoad:function(){cc.director.preloadScene("game",function(){console.log("Next scene preloaded")})},start:function(){2==i.ac&&(i.ac=0,this.shareRequest())},pageToGame:function(){this.isLoading()||cc.director.loadScene("game")},shareRequest:function(){if(!this.isLoading()){this.loadMask.getComponent("mask").showLoad();var t=this;try{FBInstant.shareAsync({intent:"SHARE",image:t.newShareImg,text:"oh bro ,i need ur help"}).then(function(){t.loadMask.getComponent("mask").closeLoad(),console.log("ok")})}catch(e){t.loadMask.getComponent("mask").closeLoad(),console.log("share error : "),console.log(e)}}},isLoading:function(){return!(!this.loadMask.active&&!this.rankMask.active)}}),cc._RF.pop()},{common:"common"}],item:[function(t,e){"use strict";cc._RF.push(e,"2ba24DBMBVJJKSLw7XeoVbn","item"),cc.Class({extends:cc.Component,properties:{rank:{default:null,type:cc.Label},user:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(t,e,i){this.rank.string=null==t?"":t,this.user.string=null==e?"":e,this.score.string=null==i?"":i}}),cc._RF.pop()},{}],line:[function(t,e){"use strict";cc._RF.push(e,"1f7004m0TxEaYALmAN36zxv","line"),cc.Class({extends:cc.Component,properties:{border:0},start:function(){},ready:function(t,e,i){if(this.node.width=this.border,this.node.height=0,this.node.x=t,this.node.y=e,i){var n=cc.rotateBy(0,-90);this.node.runAction(n)}},reInit:function(t){this.node.height=0;var e=cc.rotateBy(0,t);this.node.runAction(e)}}),cc._RF.pop()},{}],mask:[function(t,e){"use strict";cc._RF.push(e,"554e1f5a79Df6eu2F7338wk","mask"),cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Node},rotSpeed:0},onLoad:function(){this.closeLoad()},start:function(){},showLoad:function(){this.node.active=!0,this.loading()},closeLoad:function(){this.node.active=!1},loading:function(){console.log("loading");var t=cc.rotateBy(this.rotSpeed,360);this.icon.runAction(t);var e=this;setTimeout(function(){try{e.node.active&&e.loading()}catch(t){}},1e3*this.rotSpeed)}}),cc._RF.pop()},{}],rank:[function(t,e){"use strict";cc._RF.push(e,"ac140Dsm6JESJqHlFcavzWH","rank");var i=t("common");cc.Class({extends:cc.Component,properties:{mask:{default:null,type:cc.Node},cont:{default:null,type:cc.Node},itemRank:{default:null,type:cc.Prefab},playerRank:{default:null,type:cc.Node},loadMask:{default:null,type:cc.Node},itemX:140,itemY:-95,itemMargin:20,rankName:"testRank",pageSize:100},onLoad:function(){this.clear(),this.node.active=!1,this.mask.active=!1,1==i.ac&&(i.ac=0,this.open())},start:function(){},close:function(){this.loadMask.getComponent("mask").closeLoad(),this.clear(),this.node.active=!1,this.mask.active=!1},open:function(){this.isLoading()||(this.loadMask.getComponent("mask").showLoad(),this.node.active=!0,this.mask.active=!0,this.playerRank.active=!1,this.getPlayScore())},getPlayScore:function(){try{var t=this;FBInstant.getLeaderboardAsync(this.rankName).then(function(t){return t.getPlayerEntryAsync()}).then(function(e){try{t.playerRank.getComponent("item").init(e.getRank(),e.getPlayer().getName(),e.getScore())}catch(i){}t.playerRank.active=!0,t.getRankList()})}catch(e){t.loadMask.getComponent("mask").closeLoad(),console.log("getPlayScore error : "+e)}},getRankList:function(){var t=this;try{FBInstant.getLeaderboardAsync(this.rankName).then(function(t){return t.getEntriesAsync(this.pageSize,0)}).then(function(e){t.initCont(e),t.loadMask.getComponent("mask").closeLoad()})}catch(e){t.loadMask.getComponent("mask").closeLoad(),console.log("getRankList error : "+e)}},initCont:function(t){var e=-this.itemY+(this.itemRank.data.height+this.itemMargin)*t.length,i=this.cont.height;for(var n in e>i&&(this.cont.height=e),t)this.addItem(t[n].getRank(),t[n].getPlayer().getName(),t[n].getScore(),n)},addItem:function(t,e,i,n){var o=cc.instantiate(this.itemRank);o.getComponent("item").init(t,e,i),o.setPosition(this.itemX,this.itemY-(this.itemRank.data.height+this.itemMargin)*n),this.cont.addChild(o)},clear:function(){var t=this.cont.children;for(var e in t)t[e].destroy()},isLoading:function(){return!(!this.loadMask.active&&!this.mask.active)}}),cc._RF.pop()},{common:"common"}],resultShow:[function(t,e){"use strict";cc._RF.push(e,"922d2BCm9xPUp9HUm8UVD0S","resultShow"),cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Label},hisScore:{default:null,type:cc.Label}},onLoad:function(){this.node.active=!1},start:function(){},show:function(t,e){this.node.active=!0,null==e&&(e=t),this.score.string="score : "+t,this.hisScore.string="highest : "+e}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"7d270pKeQlAP459In1RUPbU","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","common","ad","g","gameCtl","human","line","resultShow","indexCtl","item","rank","mask"]);